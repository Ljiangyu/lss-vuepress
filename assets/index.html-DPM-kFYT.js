import{_ as a,c as n,d as l,a as e,o as h,r as t}from"./app-Cjt4Wlb7.js";const k={};function p(d,s){const i=t("comment");return h(),n("div",null,[s[0]||(s[0]=l(`<blockquote><p>最近一段时间好多事情，实习也是天天加班，累。工作的时候更新前端包，看到使用docker实现，自己也打算记录整理一下。</p></blockquote><h2 id="nginx" tabindex="-1"><a class="header-anchor" href="#nginx"><span>nginx</span></a></h2><h3 id="构建nginx容器" tabindex="-1"><a class="header-anchor" href="#构建nginx容器"><span>构建nginx容器</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> web-app</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 1234:80</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 端口映射</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -v</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /docker/nginx/conf:/etc/nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  -v</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /docker/nginx/logs:/var/log/nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  --registry-mirror=https://docker.mirrors.ustc.edu.cn</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  -v</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /docker/nginx/html:/usr/share/nginx/html</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  nginx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用docker遇到的一个搞笑的问题,使用python3 -m json.tool 命令处理</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@lss-virtual-machine:/docker/nginx/conf#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/docker/daemon.json</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  &quot;registry-mirrors&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;https://docker.m.daocloud.io/&quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">　　　　　　&quot;https://huecker.io/&quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">　　　　　　&quot;https://dockerhub.timeweb.cloud&quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">　　　　　　&quot;https://noohub.ru/&quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">　　　　　　&quot;https://dockerproxy.com&quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">　　　　　　&quot;https://docker.mirrors.ustc.edu.cn&quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">　　　　　　&quot;https://docker.nju.edu.cn&quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">　　　　　　&quot;https://xx4bwyg2.mirror.aliyuncs.com&quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">　　　　　　&quot;http://f1361db2.m.daocloud.io&quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">　　　　　　&quot;https://registry.docker-cn.com&quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">　　　　　　&quot;http://hub-mirror.c.163.com&quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">　　　　　　&quot;https://docker.mirrors.ustc.edu.cn&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">          </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  ]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@lss-virtual-machine:/docker/nginx/conf#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> python3</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> json.tool</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/docker/daemon.json</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Expecting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> value:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> line</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> column</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (char </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">64</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@lss-virtual-machine:/docker/nginx/conf#</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="nginx配置" tabindex="-1"><a class="header-anchor" href="#nginx配置"><span>nginx配置</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">events</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        worker_connections</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1024</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">}</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">http</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> listen</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 80</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> server_name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> localhost</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # 静态文件根目录（容器内的路径）</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # 这里需要注意是容器内的路径</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/share/nginx/html/dist</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # 默认首页文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        index</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> index.html</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # 启用 gzip 压缩</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        gzip</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> on</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> gzip_types</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> text/plain</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> text/css</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> application/json</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> application/javascript</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> text/xml</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> application/xml</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> application/xml+rss</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> text/javascript</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # 处理静态文件请求</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        location</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> try_files</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $uri</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $uri</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /index.html</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        }</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # 处理 404 错误</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        error_page</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 404</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /404.html</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> location</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /404.html</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> internal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        }</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # 处理 50x 错误</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        error_page</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 500</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 502</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 503</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 504</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /50x.html</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> location</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /50x.html</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> internal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,8)),e(i)])}const c=a(k,[["render",p],["__file","index.html.vue"]]),A=JSON.parse('{"path":"/article/d4e21ogi/","title":"使用docker启动nginx","lang":"zh-CN","frontmatter":{"title":"使用docker启动nginx","createTime":"2025/01/12 23:00:50","permalink":"/article/d4e21ogi/","tags":["nginx","docker","运维"]},"headers":[],"readingTime":{"minutes":0.95,"words":284},"git":{"updatedTime":1736697940000,"contributors":[{"name":"Ljiangyu","email":"104154611+Ljiangyu@users.noreply.github.com","commits":1,"avatar":"https://avatars.githubusercontent.com/Ljiangyu?v=4","url":"https://github.com/Ljiangyu"}]},"filePathRelative":"运维/使用docker启动nginx.md","categoryList":[{"id":"60eec8","sort":10002,"name":"运维"}],"bulletin":false}');export{c as comp,A as data};
